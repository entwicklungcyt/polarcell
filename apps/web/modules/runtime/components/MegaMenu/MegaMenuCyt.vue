<template>
  <header ref="referenceRef" class="flex flex-col align-center relative w-full p-[20px] max-w-screen-3xl mx-auto" :class="[headerClass, { 'lg:pt-[0] lg:pb-[0]': $attrs.isSlimHeader } ]">
    <nav ref="floatingRef"
      class="grid grid-cols-2 gap-x-[20px] lg:grid-cols-3"
      :class="{ 'lg:flex': $attrs.isSlimHeader }"
      >

      <span v-if="viewport.isLessThan('lg') && $attrs.isSlimHeader" class="flex gap-[15px] items-center">
        <button
          :aria-label="t('common.navigation.closeMenu')"
          @click="openMenu([])"
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="27" height="20" viewBox="0 0 27 20"><g transform="translate(-0.5 -2.5)"><path d="M25,1H0A1,1,0,0,1-1,0,1,1,0,0,1,0-1H25a1,1,0,0,1,1,1A1,1,0,0,1,25,1Z" transform="translate(1.5 3.5)" fill="#fff"/><path d="M20,1H0A1,1,0,0,1-1,0,1,1,0,0,1,0-1H20a1,1,0,0,1,1,1A1,1,0,0,1,20,1Z" transform="translate(1.5 12.5)" fill="#fff"/><path d="M25,1H0A1,1,0,0,1-1,0,1,1,0,0,1,0-1H25a1,1,0,0,1,1,1A1,1,0,0,1,25,1Z" transform="translate(1.5 21.5)" fill="#fff"/></g></svg>
        </button>

        <NuxtLink
          class="lg:order-[-1] flex items-center"
          :to="localePath(paths.home)"
          :aria-label="t('common.actions.goToHomepage')"
          >
          <svg v-if="!$attrs.isSlimHeader" class="w-[140px] h-auto lg:w-[100%] lg:max-w-[75%] xl:w-[300px]" 
            xmlns="http://www.w3.org/2000/svg" width="140" height="40.001" viewBox="0 0 140 40.001"><g transform="translate(-2 0)"><path d="M13.305,2.463l.163,3h-2ZM12.851,0,6.989,8.712h2.5l1-1.633h3.08l.088,1.633H16L14.983,0Z" fill="#00a4cc"/><path d="M24.464,0,21.73,2.694,20.7,3.729,21.745,0H19.474L17.049,8.714h2.264l.623-2.221,1.266-1,1.077,3.22h2.589l-1.8-4.77L27.4,0Z" fill="#00a4cc"/><path d="M33.364,0,30.63,2.694,29.6,3.729,30.645,0H28.374L25.949,8.714h2.264l.623-2.221,1.266-1,1.077,3.22h2.589l-1.8-4.77L36.3,0Z" fill="#00a4cc"/><path d="M42.241,0,40.673,5.7a1.789,1.789,0,0,1-1.887,1.527,1.1,1.1,0,0,1-.755-.263.9.9,0,0,1-.248-.689,2.481,2.481,0,0,1,.063-.569L39.4,0H37.13L35.563,5.691a2.645,2.645,0,0,0,.106,1.63,2.219,2.219,0,0,0,1.046,1.107,3.921,3.921,0,0,0,1.792.41,4.709,4.709,0,0,0,2.882-.826,3.894,3.894,0,0,0,1.55-2.327L44.5,0Z" fill="#00a4cc"/><path d="M59.723,34.443a2.905,2.905,0,0,0-1.544-.4H56.244L54.753,39.89h1.935a4.339,4.339,0,0,0,1.352-.209,4.076,4.076,0,0,0,1.164-.588,3.884,3.884,0,0,0,.882-.9,3.489,3.489,0,0,0,.529-1.144A2.575,2.575,0,0,0,60.6,35.5a2.045,2.045,0,0,0-.87-1.059m-.46,2.443h0a1.991,1.991,0,0,1-.317.7,2.575,2.575,0,0,1-.538.555,2.37,2.37,0,0,1-.68.363,2.326,2.326,0,0,1-.758.125h-.527l.85-3.307h.574a1.736,1.736,0,0,1,.885.2,1.1,1.1,0,0,1,.493.555,1.319,1.319,0,0,1,.022.81" fill="#fff"/><path d="M60.789,39.89h3.889L65,38.654H62.453l.289-1.11h2.085l.305-1.193h-2.09l.278-1.069h2.5l.309-1.236h-3.85Z" fill="#fff"/><path d="M70.683,34.3a2.131,2.131,0,0,0-1.089-.26H67.316l-1.491,5.844h1.359l.5-1.962h.73l.636,1.962h1.519l-.78-2.176c.025-.01.052-.013.077-.023a2.655,2.655,0,0,0,.936-.659,2.279,2.279,0,0,0,.524-.974,1.663,1.663,0,0,0-.025-1.039,1.392,1.392,0,0,0-.616-.713m-.918,2.024a.942.942,0,0,1-.381.272,1.375,1.375,0,0,1-.5.087H68l.358-1.42H69.3a.7.7,0,0,1,.512.174.49.49,0,0,1,.131.446.814.814,0,0,1-.181.436Z" fill="#fff"/><path d="M78.345,34.312h0a2.1,2.1,0,0,0-1.091-.261H74.975l-1.491,5.843h1.358l.472-1.845h1.055a2.786,2.786,0,0,0,1.165-.249,2.655,2.655,0,0,0,.914-.682,2.478,2.478,0,0,0,.526-1,1.746,1.746,0,0,0-.013-1.077,1.4,1.4,0,0,0-.616-.731m-.886,2.05h0a1.135,1.135,0,0,1-.365.321,1.06,1.06,0,0,1-.531.13h-.924l.385-1.537H77a.575.575,0,0,1,.644.5.552.552,0,0,1-.012.214.921.921,0,0,1-.172.376" fill="#fff"/><path d="M83.6,34.3a2.129,2.129,0,0,0-1.088-.26H80.242L78.75,39.885H80.1l.5-1.963h.73l.637,1.963H83.49l-.78-2.177c.024-.009.052-.013.077-.023a2.664,2.664,0,0,0,.936-.659,2.257,2.257,0,0,0,.523-.973,1.666,1.666,0,0,0-.024-1.04A1.387,1.387,0,0,0,83.6,34.3m-.918,2.019v.005a.92.92,0,0,1-.382.272,1.355,1.355,0,0,1-.5.087h-.88l.358-1.42h.946a.7.7,0,0,1,.512.174.492.492,0,0,1,.131.447.811.811,0,0,1-.181.435" fill="#fff"/><path d="M84.352,39.89h3.889l.327-1.236H86.017l.289-1.11h2.085l.305-1.193H86.6l.278-1.069h2.5l.31-1.236H85.84Z" fill="#fff"/><path d="M93.354,36.35l-1-2.3H90.879l-1.491,5.843h1.358l.968-3.79,1.109,2.5,2.285-2.43-.945,3.715h1.359l1.491-5.843H95.5Z" fill="#fff"/><path d="M96.753,39.89h1.359l1.49-5.844H98.244Z" fill="#fff"/><path d="M103.416,37.67a1.325,1.325,0,0,1-.29.563,1.443,1.443,0,0,1-.517.385,1.653,1.653,0,0,1-.679.137.908.908,0,0,1-.508-.129.621.621,0,0,1-.259-.372,1.18,1.18,0,0,1,.025-.584l.92-3.625H100.75l-.92,3.625a2.185,2.185,0,0,0,0,1.231,1.445,1.445,0,0,0,.673.81,2.522,2.522,0,0,0,1.275.288,3.287,3.287,0,0,0,1.369-.276,2.715,2.715,0,0,0,1.026-.8,3.3,3.3,0,0,0,.606-1.256l.92-3.625h-1.358Z" fill="#fff"/><path d="M109.317,36.35l-1-2.3H106.84l-1.49,5.843h1.358l.967-3.79,1.109,2.5,2.285-2.43-.945,3.715h1.359l1.491-5.843h-1.51Z" fill="#fff"/><path d="M119.489,34.045h-1.435l-3.785,5.845H115.8l.7-1.11h2.307l.139,1.11h1.363l-.8-5.845Zm-2.241,3.549,1.181-1.872.236,1.872Z" fill="#fff"/><path d="M127.664,34.046H125.85l-2.506,2.117.541-2.117h-1.35l-1.492,5.844h1.35l.464-1.817.519-.435,1.194,2.252h1.645l-1.729-3.182Z" fill="#fff"/><path d="M131.772,34.046l-2.505,2.117.539-2.117h-1.35l-1.49,5.844h1.352l.463-1.817.52-.435,1.192,2.252h1.646l-1.729-3.182,3.178-2.662Z" fill="#fff"/><path d="M137.88,34.046l-.92,3.624a1.329,1.329,0,0,1-.289.563,1.465,1.465,0,0,1-.518.384,1.648,1.648,0,0,1-.678.137.908.908,0,0,1-.509-.128.628.628,0,0,1-.258-.372,1.168,1.168,0,0,1,.025-.584l.92-3.624h-1.359l-.92,3.624a2.185,2.185,0,0,0,0,1.231,1.438,1.438,0,0,0,.673.81,2.52,2.52,0,0,0,1.274.287,3.287,3.287,0,0,0,1.369-.275,2.736,2.736,0,0,0,1.027-.8,3.331,3.331,0,0,0,.606-1.256l.919-3.624Z" fill="#fff"/><path d="M17.963,14.492h0c-1.03-.825-3.07-.808-4.589-.808H6.114l-.729,2.725c.568.359.353.934.2,1.507L3.737,24.823A1.859,1.859,0,0,1,2.73,26.329L2,29.056H8.759l.731-2.729c-.57-.359-.354-.934-.153-1.686h1.977c4.556,0,6.164-1.812,6.947-4.734l.326-1.219c.109-.4,1.055-2.852-.624-4.2M12.91,19.152h0c-.384,1.434-.538,2.239-2.181,2.239h-.52l1.206-4.5h.519c1.644,0,1.366.807.978,2.26" fill="#fff"/><path d="M42.9,24.085c-.259.969-.434,1.7-1.85,1.7H40.5l2.11-7.874a1.865,1.865,0,0,1,1.008-1.5l.73-2.723h-6.76l-.729,2.723c.569.36.353.934.2,1.507l-1.847,6.9a1.864,1.864,0,0,1-1.007,1.507l-.732,2.723H46.454l2-7.463h-4.89Z" fill="#fff"/><path d="M29.168,13.381c-3.933,0-6.892.95-7.909,4.752l-1.733,6.475c-1.018,3.8,1.432,4.752,5.364,4.752s6.9-.95,7.908-4.752l1.734-6.474c1.017-3.8-1.432-4.753-5.364-4.753m-.124,4.5h0L27.18,24.842a1.452,1.452,0,0,1-1.4,1.2c-1.144,0-.793-1.094-.761-1.2l1.864-6.959a1.437,1.437,0,0,1,1.4-1.184c1.145,0,.793,1.076.764,1.184" fill="#fff"/><path d="M63.341,24.822h0l.381-11.138h-7.9l-5.268,10.9c-.326.593-.6,1.381-1.3,1.74l-.731,2.723h5.9l.731-2.723a.617.617,0,0,1-.545-.68v0a.562.562,0,0,1,.041-.156,2.092,2.092,0,0,1,.2-.448h3.155a1.437,1.437,0,0,1-.038.448,1.176,1.176,0,0,1-.872.843l-.73,2.723h6.773l.73-2.728c-.58-.16-.559-1.021-.534-1.5m-5.023-2.775h-2.3l2.33-4.552h.042Z" fill="#fff"/><path d="M122.214,21.59l-.667,2.5c-.26.969-.434,1.706-1.85,1.706h-.543l2.107-7.872a1.865,1.865,0,0,1,1.008-1.507L123,13.689h-6.76l-.73,2.723c.569.36.353.934.2,1.507l-1.849,6.9a1.861,1.861,0,0,1-1.006,1.507l-.967,2.723h13.217l2-7.463Z" fill="#fff"/><path d="M137.109,21.6l-.665,2.49c-.258.968-.435,1.7-1.849,1.7h-.544l2.108-7.872a1.867,1.867,0,0,1,1.006-1.5l.732-2.729h-6.763l-.727,2.723c.569.36.352.934.2,1.507l-1.85,6.9a1.861,1.861,0,0,1-1.006,1.507l-.73,2.723H140l2-7.458Z" fill="#fff"/><path d="M106.65,24c-.357,1.256-.481,1.793-2.144,1.793H103.7l.832-3.1h3.516l.8-2.995h-3.515l.735-2.744h.806c1.5,0,1.549.431,1.268,1.47l-.122.468h4.643l1.393-5.2H100.7l-.73,2.721c.569.36.354.934.2,1.507l-1.846,6.9a1.869,1.869,0,0,1-1.008,1.506l-.729,2.723H109.94l1.489-5.554h-4.644Z" fill="#fff"/><path d="M82.572,17.737c.375-1.4.225-2.708-1.03-3.443-1.039-.627-2.77-.61-4.143-.61H69.68l-.732,2.724c.57.359.354.933.2,1.507l-1.85,6.9a1.868,1.868,0,0,1-1.006,1.507l-.731,2.723h6.761l.731-2.723c-.57-.359-.355-.934-.2-1.507l.389-1.325h.466c1.507.036,1.575.222,1.247,1.439a12.884,12.884,0,0,0-.793,4.123H79.9l.73-2.728c-.624-.233-.423-.986-.283-1.506l.238-.878c.418-1.56.008-2.207-1.643-2.568l.009-.035a4.523,4.523,0,0,0,3.625-3.6m-5.849.647h0A1.834,1.834,0,0,1,74.713,20h-.561l.841-3.138h.561c1.207,0,1.438.537,1.173,1.524" fill="#fff"/><path d="M90.344,24.346c-.168.628-.31,1.7-1.476,1.7s-.732-1.076-.563-1.7l1.59-5.936c.168-.628.312-1.706,1.475-1.706s.731,1.076.563,1.706l-.242.918h5.366L98.2,15.059a11.15,11.15,0,0,0-5.707-1.667,10.594,10.594,0,0,0-5.6,1.167,5.521,5.521,0,0,0-2.5,3.657L82.961,23.56c-.452,1.686-.946,3.3.262,4.537.862.9,2.91,1.327,5.152,1.273A13.855,13.855,0,0,0,94.8,27.736l1.373-5.13H90.809Z" fill="#fff"/></g></svg>
          <svg v-else xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="144" height="20" viewBox="0 0 144 20"><defs><clipPath id="a"><rect width="144" height="20" fill="none"/></clipPath></defs><g clip-path="url(#a)"><path d="M143.586,9.009A2,2,0,0,0,142,8.228h0l-4.219,0,.311-1.164a1.871,1.871,0,0,0,.054-.278,2,2,0,0,0,.951-1.224l.733-2.728A2,2,0,0,0,137.9.322h-6.763A2,2,0,0,0,129.2,1.8l-.727,2.723a2,2,0,0,0,.2,1.51l-.647,2.416a1.987,1.987,0,0,0-.924-.232h-4.218l.309-1.153a2.049,2.049,0,0,0,.054-.281,2,2,0,0,0,.953-1.224l.732-2.729A2,2,0,0,0,123,.321H116.24a2,2,0,0,0-1.1.336,1.99,1.99,0,0,0-1.086-.335H100.7a2,2,0,0,0-1.9,1.405,13.143,13.143,0,0,0-6.218-1.7C92.312.009,92.046,0,91.782,0a12.632,12.632,0,0,0-5.806,1.417c-.049.025-.1.053-.143.082A7.528,7.528,0,0,0,84.21,2.884,4.342,4.342,0,0,0,82.553,1.2l-.063-.036A9.981,9.981,0,0,0,77.623.318H69.679A2,2,0,0,0,67.748,1.8l-.732,2.723a1.989,1.989,0,0,0,.2,1.514l-1.849,6.9,0,.014.361-10.561a2,2,0,0,0-2-2.065h-7.9a2,2,0,0,0-1.8,1.129l-3.8,7.862a1.917,1.917,0,0,0-1.771-1.088H44.233l.311-1.161a1.908,1.908,0,0,0,.054-.279,1.994,1.994,0,0,0,.954-1.225l.73-2.723A2,2,0,0,0,44.35.322H37.588A2,2,0,0,0,35.656,1.8L35.6,2C34.036.25,31.359.014,29.167.014c-2.8,0-6.441.414-8.56,3.416a4.513,4.513,0,0,0-1.392-1.867c-.032-.025-.065-.05-.1-.073C17.56.319,15.252.319,13.558.319H6.115A2,2,0,0,0,4.182,1.8L3.453,4.523a1.99,1.99,0,0,0,.2,1.511L1.8,12.937a1.922,1.922,0,0,0-.054.28A2,2,0,0,0,.8,14.443l-.73,2.726A2,2,0,0,0,2,19.682H8.76A2,2,0,0,0,10.692,18.2l.73-2.728c.018-.068.033-.137.044-.2a9.608,9.608,0,0,0,5.944-1.7,5.165,5.165,0,0,0,.827,4.179c1.527,1.986,4.357,2.241,6.652,2.241a12.015,12.015,0,0,0,6.721-1.611,1.957,1.957,0,0,0,.277.522,2,2,0,0,0,1.587.781h12.98a1.99,1.99,0,0,0,1.042-.3,1.985,1.985,0,0,0,1.03.3h5.9a1.99,1.99,0,0,0,.972-.252,2,2,0,0,0,.974.253h6.772a2,2,0,0,0,1.219-.413,1.992,1.992,0,0,0,1.2.408h6.761a2,2,0,0,0,.913-.22,1.991,1.991,0,0,0,.926.227h5.734A2,2,0,0,0,81.828,18.2l.011-.043C83.421,19.757,86.377,20,88.007,20c.135,0,.271,0,.408,0a15.924,15.924,0,0,0,6.4-1.409A1.973,1.973,0,0,0,95,18.9a2,2,0,0,0,1.587.781h13.352a1.991,1.991,0,0,0,.975-.256,2,2,0,0,0,.973.256H125.1a2,2,0,0,0,.965-.249,2,2,0,0,0,.952.25H140a2,2,0,0,0,1.932-1.481l2-7.458a2,2,0,0,0-.346-1.732"/><path d="M17.963,3.121v0c-1.03-.825-3.07-.808-4.589-.808H6.114L5.385,5.038c.568.359.353.934.2,1.507L3.737,13.452A1.859,1.859,0,0,1,2.73,14.958L2,17.685H8.759l.731-2.729c-.57-.359-.354-.934-.153-1.686h1.977c4.556,0,6.164-1.812,6.947-4.734l.326-1.219c.109-.395,1.055-2.852-.624-4.2M12.91,7.781l0,0c-.384,1.434-.538,2.239-2.181,2.239h-.52l1.206-4.5h.519c1.644,0,1.366.807.978,2.26" fill="#fff"/><path d="M42.9,12.714c-.259.969-.434,1.7-1.85,1.7H40.5l2.11-7.874a1.866,1.866,0,0,1,1.008-1.5l.73-2.723H37.588l-.729,2.723c.569.36.353.934.2,1.507l-1.847,6.9a1.865,1.865,0,0,1-1.007,1.507l-.732,2.723H46.454l2-7.463H43.564Z" fill="#fff"/><path d="M29.168,2.01c-3.933,0-6.892.95-7.909,4.752l-1.733,6.475c-1.018,3.8,1.432,4.752,5.364,4.752s6.9-.95,7.908-4.752l1.734-6.474c1.017-3.8-1.432-4.753-5.364-4.753m-.124,4.5v0L27.18,13.471a1.452,1.452,0,0,1-1.4,1.2c-1.144,0-.793-1.094-.761-1.2l1.864-6.959a1.437,1.437,0,0,1,1.4-1.184c1.145,0,.793,1.076.764,1.184" fill="#fff"/><path d="M63.341,13.451l0,0,.381-11.138h-7.9l-5.268,10.9c-.326.593-.6,1.381-1.3,1.74l-.731,2.723h5.9l.731-2.723a.616.616,0,0,1-.544-.685h0a.562.562,0,0,1,.041-.156,2.125,2.125,0,0,1,.2-.448h3.155a1.437,1.437,0,0,1-.038.448,1.176,1.176,0,0,1-.872.843l-.73,2.723h6.773l.73-2.728c-.58-.16-.559-1.021-.534-1.505M58.312,10.67h-2.3l2.33-4.552h.042Z" fill="#fff"/><path d="M122.214,10.219l-.667,2.5c-.26.969-.434,1.706-1.85,1.706h-.543l2.107-7.872a1.865,1.865,0,0,1,1.008-1.507L123,2.318H116.24l-.73,2.723c.569.36.353.934.2,1.507l-1.849,6.9a1.861,1.861,0,0,1-1.006,1.507l-.967,2.723h13.217l2-7.463Z" fill="#fff"/><path d="M137.109,10.226l-.665,2.49c-.258.968-.435,1.7-1.849,1.7h-.544l2.108-7.872a1.868,1.868,0,0,1,1.006-1.5l.732-2.729h-6.763l-.727,2.723c.569.36.352.934.2,1.507l-1.85,6.9a1.861,1.861,0,0,1-1.006,1.507l-.73,2.723H140l2-7.458Z" fill="#fff"/><path d="M106.65,12.628c-.357,1.256-.481,1.793-2.144,1.793H103.7l.832-3.1h3.516l.8-2.995h-3.515l.735-2.744h.806c1.5,0,1.549.431,1.268,1.47l-.122.468h4.643l1.393-5.2H100.7L99.97,5.041c.569.36.354.934.2,1.507l-1.846,6.9a1.867,1.867,0,0,1-1.008,1.506l-.729,2.723H109.94l1.489-5.554h-4.644Z" fill="#fff"/><path d="M82.572,6.366c.375-1.4.225-2.708-1.03-3.443h0c-1.039-.627-2.77-.61-4.143-.61H69.68l-.732,2.724c.57.359.354.933.2,1.507l-1.85,6.9a1.868,1.868,0,0,1-1.006,1.507l-.731,2.723h6.761l.731-2.723c-.57-.359-.355-.934-.2-1.507l.389-1.325h.466c1.507.036,1.575.222,1.247,1.439a12.9,12.9,0,0,0-.793,4.123H79.9l.73-2.728c-.624-.233-.423-.986-.283-1.506l.238-.878c.418-1.56.008-2.207-1.643-2.568l.009-.035a4.522,4.522,0,0,0,3.625-3.6m-5.849.647h0a1.834,1.834,0,0,1-2.014,1.613h-.561l.841-3.138h.561c1.207,0,1.438.537,1.173,1.524" fill="#fff"/><path d="M90.344,12.975c-.168.628-.31,1.7-1.476,1.7s-.732-1.076-.563-1.7l1.59-5.936c.168-.628.312-1.706,1.475-1.706s.731,1.076.563,1.706l-.242.918h5.366L98.2,3.688a11.151,11.151,0,0,0-5.707-1.667,10.6,10.6,0,0,0-5.6,1.167,5.521,5.521,0,0,0-2.5,3.657l-1.432,5.344c-.452,1.686-.946,3.3.262,4.537.862.9,2.91,1.327,5.152,1.273a13.848,13.848,0,0,0,6.428-1.634l1.373-5.13H90.809Z" fill="#fff"/></g></svg>
        </NuxtLink>
      </span>

      <NuxtLink v-else
        class="lg:order-[-1] flex items-center"
        :to="localePath(paths.home)"
        :aria-label="t('common.actions.goToHomepage')"
        >
        <svg v-if="!$attrs.isSlimHeader" class="w-[140px] h-auto lg:w-[100%] lg:max-w-[75%] xl:w-[300px]" 
          xmlns="http://www.w3.org/2000/svg" width="140" height="40.001" viewBox="0 0 140 40.001"><g transform="translate(-2 0)"><path d="M13.305,2.463l.163,3h-2ZM12.851,0,6.989,8.712h2.5l1-1.633h3.08l.088,1.633H16L14.983,0Z" fill="#00a4cc"/><path d="M24.464,0,21.73,2.694,20.7,3.729,21.745,0H19.474L17.049,8.714h2.264l.623-2.221,1.266-1,1.077,3.22h2.589l-1.8-4.77L27.4,0Z" fill="#00a4cc"/><path d="M33.364,0,30.63,2.694,29.6,3.729,30.645,0H28.374L25.949,8.714h2.264l.623-2.221,1.266-1,1.077,3.22h2.589l-1.8-4.77L36.3,0Z" fill="#00a4cc"/><path d="M42.241,0,40.673,5.7a1.789,1.789,0,0,1-1.887,1.527,1.1,1.1,0,0,1-.755-.263.9.9,0,0,1-.248-.689,2.481,2.481,0,0,1,.063-.569L39.4,0H37.13L35.563,5.691a2.645,2.645,0,0,0,.106,1.63,2.219,2.219,0,0,0,1.046,1.107,3.921,3.921,0,0,0,1.792.41,4.709,4.709,0,0,0,2.882-.826,3.894,3.894,0,0,0,1.55-2.327L44.5,0Z" fill="#00a4cc"/><path d="M59.723,34.443a2.905,2.905,0,0,0-1.544-.4H56.244L54.753,39.89h1.935a4.339,4.339,0,0,0,1.352-.209,4.076,4.076,0,0,0,1.164-.588,3.884,3.884,0,0,0,.882-.9,3.489,3.489,0,0,0,.529-1.144A2.575,2.575,0,0,0,60.6,35.5a2.045,2.045,0,0,0-.87-1.059m-.46,2.443h0a1.991,1.991,0,0,1-.317.7,2.575,2.575,0,0,1-.538.555,2.37,2.37,0,0,1-.68.363,2.326,2.326,0,0,1-.758.125h-.527l.85-3.307h.574a1.736,1.736,0,0,1,.885.2,1.1,1.1,0,0,1,.493.555,1.319,1.319,0,0,1,.022.81" fill="#fff"/><path d="M60.789,39.89h3.889L65,38.654H62.453l.289-1.11h2.085l.305-1.193h-2.09l.278-1.069h2.5l.309-1.236h-3.85Z" fill="#fff"/><path d="M70.683,34.3a2.131,2.131,0,0,0-1.089-.26H67.316l-1.491,5.844h1.359l.5-1.962h.73l.636,1.962h1.519l-.78-2.176c.025-.01.052-.013.077-.023a2.655,2.655,0,0,0,.936-.659,2.279,2.279,0,0,0,.524-.974,1.663,1.663,0,0,0-.025-1.039,1.392,1.392,0,0,0-.616-.713m-.918,2.024a.942.942,0,0,1-.381.272,1.375,1.375,0,0,1-.5.087H68l.358-1.42H69.3a.7.7,0,0,1,.512.174.49.49,0,0,1,.131.446.814.814,0,0,1-.181.436Z" fill="#fff"/><path d="M78.345,34.312h0a2.1,2.1,0,0,0-1.091-.261H74.975l-1.491,5.843h1.358l.472-1.845h1.055a2.786,2.786,0,0,0,1.165-.249,2.655,2.655,0,0,0,.914-.682,2.478,2.478,0,0,0,.526-1,1.746,1.746,0,0,0-.013-1.077,1.4,1.4,0,0,0-.616-.731m-.886,2.05h0a1.135,1.135,0,0,1-.365.321,1.06,1.06,0,0,1-.531.13h-.924l.385-1.537H77a.575.575,0,0,1,.644.5.552.552,0,0,1-.012.214.921.921,0,0,1-.172.376" fill="#fff"/><path d="M83.6,34.3a2.129,2.129,0,0,0-1.088-.26H80.242L78.75,39.885H80.1l.5-1.963h.73l.637,1.963H83.49l-.78-2.177c.024-.009.052-.013.077-.023a2.664,2.664,0,0,0,.936-.659,2.257,2.257,0,0,0,.523-.973,1.666,1.666,0,0,0-.024-1.04A1.387,1.387,0,0,0,83.6,34.3m-.918,2.019v.005a.92.92,0,0,1-.382.272,1.355,1.355,0,0,1-.5.087h-.88l.358-1.42h.946a.7.7,0,0,1,.512.174.492.492,0,0,1,.131.447.811.811,0,0,1-.181.435" fill="#fff"/><path d="M84.352,39.89h3.889l.327-1.236H86.017l.289-1.11h2.085l.305-1.193H86.6l.278-1.069h2.5l.31-1.236H85.84Z" fill="#fff"/><path d="M93.354,36.35l-1-2.3H90.879l-1.491,5.843h1.358l.968-3.79,1.109,2.5,2.285-2.43-.945,3.715h1.359l1.491-5.843H95.5Z" fill="#fff"/><path d="M96.753,39.89h1.359l1.49-5.844H98.244Z" fill="#fff"/><path d="M103.416,37.67a1.325,1.325,0,0,1-.29.563,1.443,1.443,0,0,1-.517.385,1.653,1.653,0,0,1-.679.137.908.908,0,0,1-.508-.129.621.621,0,0,1-.259-.372,1.18,1.18,0,0,1,.025-.584l.92-3.625H100.75l-.92,3.625a2.185,2.185,0,0,0,0,1.231,1.445,1.445,0,0,0,.673.81,2.522,2.522,0,0,0,1.275.288,3.287,3.287,0,0,0,1.369-.276,2.715,2.715,0,0,0,1.026-.8,3.3,3.3,0,0,0,.606-1.256l.92-3.625h-1.358Z" fill="#fff"/><path d="M109.317,36.35l-1-2.3H106.84l-1.49,5.843h1.358l.967-3.79,1.109,2.5,2.285-2.43-.945,3.715h1.359l1.491-5.843h-1.51Z" fill="#fff"/><path d="M119.489,34.045h-1.435l-3.785,5.845H115.8l.7-1.11h2.307l.139,1.11h1.363l-.8-5.845Zm-2.241,3.549,1.181-1.872.236,1.872Z" fill="#fff"/><path d="M127.664,34.046H125.85l-2.506,2.117.541-2.117h-1.35l-1.492,5.844h1.35l.464-1.817.519-.435,1.194,2.252h1.645l-1.729-3.182Z" fill="#fff"/><path d="M131.772,34.046l-2.505,2.117.539-2.117h-1.35l-1.49,5.844h1.352l.463-1.817.52-.435,1.192,2.252h1.646l-1.729-3.182,3.178-2.662Z" fill="#fff"/><path d="M137.88,34.046l-.92,3.624a1.329,1.329,0,0,1-.289.563,1.465,1.465,0,0,1-.518.384,1.648,1.648,0,0,1-.678.137.908.908,0,0,1-.509-.128.628.628,0,0,1-.258-.372,1.168,1.168,0,0,1,.025-.584l.92-3.624h-1.359l-.92,3.624a2.185,2.185,0,0,0,0,1.231,1.438,1.438,0,0,0,.673.81,2.52,2.52,0,0,0,1.274.287,3.287,3.287,0,0,0,1.369-.275,2.736,2.736,0,0,0,1.027-.8,3.331,3.331,0,0,0,.606-1.256l.919-3.624Z" fill="#fff"/><path d="M17.963,14.492h0c-1.03-.825-3.07-.808-4.589-.808H6.114l-.729,2.725c.568.359.353.934.2,1.507L3.737,24.823A1.859,1.859,0,0,1,2.73,26.329L2,29.056H8.759l.731-2.729c-.57-.359-.354-.934-.153-1.686h1.977c4.556,0,6.164-1.812,6.947-4.734l.326-1.219c.109-.4,1.055-2.852-.624-4.2M12.91,19.152h0c-.384,1.434-.538,2.239-2.181,2.239h-.52l1.206-4.5h.519c1.644,0,1.366.807.978,2.26" fill="#fff"/><path d="M42.9,24.085c-.259.969-.434,1.7-1.85,1.7H40.5l2.11-7.874a1.865,1.865,0,0,1,1.008-1.5l.73-2.723h-6.76l-.729,2.723c.569.36.353.934.2,1.507l-1.847,6.9a1.864,1.864,0,0,1-1.007,1.507l-.732,2.723H46.454l2-7.463h-4.89Z" fill="#fff"/><path d="M29.168,13.381c-3.933,0-6.892.95-7.909,4.752l-1.733,6.475c-1.018,3.8,1.432,4.752,5.364,4.752s6.9-.95,7.908-4.752l1.734-6.474c1.017-3.8-1.432-4.753-5.364-4.753m-.124,4.5h0L27.18,24.842a1.452,1.452,0,0,1-1.4,1.2c-1.144,0-.793-1.094-.761-1.2l1.864-6.959a1.437,1.437,0,0,1,1.4-1.184c1.145,0,.793,1.076.764,1.184" fill="#fff"/><path d="M63.341,24.822h0l.381-11.138h-7.9l-5.268,10.9c-.326.593-.6,1.381-1.3,1.74l-.731,2.723h5.9l.731-2.723a.617.617,0,0,1-.545-.68v0a.562.562,0,0,1,.041-.156,2.092,2.092,0,0,1,.2-.448h3.155a1.437,1.437,0,0,1-.038.448,1.176,1.176,0,0,1-.872.843l-.73,2.723h6.773l.73-2.728c-.58-.16-.559-1.021-.534-1.5m-5.023-2.775h-2.3l2.33-4.552h.042Z" fill="#fff"/><path d="M122.214,21.59l-.667,2.5c-.26.969-.434,1.706-1.85,1.706h-.543l2.107-7.872a1.865,1.865,0,0,1,1.008-1.507L123,13.689h-6.76l-.73,2.723c.569.36.353.934.2,1.507l-1.849,6.9a1.861,1.861,0,0,1-1.006,1.507l-.967,2.723h13.217l2-7.463Z" fill="#fff"/><path d="M137.109,21.6l-.665,2.49c-.258.968-.435,1.7-1.849,1.7h-.544l2.108-7.872a1.867,1.867,0,0,1,1.006-1.5l.732-2.729h-6.763l-.727,2.723c.569.36.352.934.2,1.507l-1.85,6.9a1.861,1.861,0,0,1-1.006,1.507l-.73,2.723H140l2-7.458Z" fill="#fff"/><path d="M106.65,24c-.357,1.256-.481,1.793-2.144,1.793H103.7l.832-3.1h3.516l.8-2.995h-3.515l.735-2.744h.806c1.5,0,1.549.431,1.268,1.47l-.122.468h4.643l1.393-5.2H100.7l-.73,2.721c.569.36.354.934.2,1.507l-1.846,6.9a1.869,1.869,0,0,1-1.008,1.506l-.729,2.723H109.94l1.489-5.554h-4.644Z" fill="#fff"/><path d="M82.572,17.737c.375-1.4.225-2.708-1.03-3.443-1.039-.627-2.77-.61-4.143-.61H69.68l-.732,2.724c.57.359.354.933.2,1.507l-1.85,6.9a1.868,1.868,0,0,1-1.006,1.507l-.731,2.723h6.761l.731-2.723c-.57-.359-.355-.934-.2-1.507l.389-1.325h.466c1.507.036,1.575.222,1.247,1.439a12.884,12.884,0,0,0-.793,4.123H79.9l.73-2.728c-.624-.233-.423-.986-.283-1.506l.238-.878c.418-1.56.008-2.207-1.643-2.568l.009-.035a4.523,4.523,0,0,0,3.625-3.6m-5.849.647h0A1.834,1.834,0,0,1,74.713,20h-.561l.841-3.138h.561c1.207,0,1.438.537,1.173,1.524" fill="#fff"/><path d="M90.344,24.346c-.168.628-.31,1.7-1.476,1.7s-.732-1.076-.563-1.7l1.59-5.936c.168-.628.312-1.706,1.475-1.706s.731,1.076.563,1.706l-.242.918h5.366L98.2,15.059a11.15,11.15,0,0,0-5.707-1.667,10.594,10.594,0,0,0-5.6,1.167,5.521,5.521,0,0,0-2.5,3.657L82.961,23.56c-.452,1.686-.946,3.3.262,4.537.862.9,2.91,1.327,5.152,1.273A13.855,13.855,0,0,0,94.8,27.736l1.373-5.13H90.809Z" fill="#fff"/></g></svg>
        <svg v-else xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="144" height="20" viewBox="0 0 144 20"><defs><clipPath id="a"><rect width="144" height="20" fill="none"/></clipPath></defs><g clip-path="url(#a)"><path d="M143.586,9.009A2,2,0,0,0,142,8.228h0l-4.219,0,.311-1.164a1.871,1.871,0,0,0,.054-.278,2,2,0,0,0,.951-1.224l.733-2.728A2,2,0,0,0,137.9.322h-6.763A2,2,0,0,0,129.2,1.8l-.727,2.723a2,2,0,0,0,.2,1.51l-.647,2.416a1.987,1.987,0,0,0-.924-.232h-4.218l.309-1.153a2.049,2.049,0,0,0,.054-.281,2,2,0,0,0,.953-1.224l.732-2.729A2,2,0,0,0,123,.321H116.24a2,2,0,0,0-1.1.336,1.99,1.99,0,0,0-1.086-.335H100.7a2,2,0,0,0-1.9,1.405,13.143,13.143,0,0,0-6.218-1.7C92.312.009,92.046,0,91.782,0a12.632,12.632,0,0,0-5.806,1.417c-.049.025-.1.053-.143.082A7.528,7.528,0,0,0,84.21,2.884,4.342,4.342,0,0,0,82.553,1.2l-.063-.036A9.981,9.981,0,0,0,77.623.318H69.679A2,2,0,0,0,67.748,1.8l-.732,2.723a1.989,1.989,0,0,0,.2,1.514l-1.849,6.9,0,.014.361-10.561a2,2,0,0,0-2-2.065h-7.9a2,2,0,0,0-1.8,1.129l-3.8,7.862a1.917,1.917,0,0,0-1.771-1.088H44.233l.311-1.161a1.908,1.908,0,0,0,.054-.279,1.994,1.994,0,0,0,.954-1.225l.73-2.723A2,2,0,0,0,44.35.322H37.588A2,2,0,0,0,35.656,1.8L35.6,2C34.036.25,31.359.014,29.167.014c-2.8,0-6.441.414-8.56,3.416a4.513,4.513,0,0,0-1.392-1.867c-.032-.025-.065-.05-.1-.073C17.56.319,15.252.319,13.558.319H6.115A2,2,0,0,0,4.182,1.8L3.453,4.523a1.99,1.99,0,0,0,.2,1.511L1.8,12.937a1.922,1.922,0,0,0-.054.28A2,2,0,0,0,.8,14.443l-.73,2.726A2,2,0,0,0,2,19.682H8.76A2,2,0,0,0,10.692,18.2l.73-2.728c.018-.068.033-.137.044-.2a9.608,9.608,0,0,0,5.944-1.7,5.165,5.165,0,0,0,.827,4.179c1.527,1.986,4.357,2.241,6.652,2.241a12.015,12.015,0,0,0,6.721-1.611,1.957,1.957,0,0,0,.277.522,2,2,0,0,0,1.587.781h12.98a1.99,1.99,0,0,0,1.042-.3,1.985,1.985,0,0,0,1.03.3h5.9a1.99,1.99,0,0,0,.972-.252,2,2,0,0,0,.974.253h6.772a2,2,0,0,0,1.219-.413,1.992,1.992,0,0,0,1.2.408h6.761a2,2,0,0,0,.913-.22,1.991,1.991,0,0,0,.926.227h5.734A2,2,0,0,0,81.828,18.2l.011-.043C83.421,19.757,86.377,20,88.007,20c.135,0,.271,0,.408,0a15.924,15.924,0,0,0,6.4-1.409A1.973,1.973,0,0,0,95,18.9a2,2,0,0,0,1.587.781h13.352a1.991,1.991,0,0,0,.975-.256,2,2,0,0,0,.973.256H125.1a2,2,0,0,0,.965-.249,2,2,0,0,0,.952.25H140a2,2,0,0,0,1.932-1.481l2-7.458a2,2,0,0,0-.346-1.732"/><path d="M17.963,3.121v0c-1.03-.825-3.07-.808-4.589-.808H6.114L5.385,5.038c.568.359.353.934.2,1.507L3.737,13.452A1.859,1.859,0,0,1,2.73,14.958L2,17.685H8.759l.731-2.729c-.57-.359-.354-.934-.153-1.686h1.977c4.556,0,6.164-1.812,6.947-4.734l.326-1.219c.109-.395,1.055-2.852-.624-4.2M12.91,7.781l0,0c-.384,1.434-.538,2.239-2.181,2.239h-.52l1.206-4.5h.519c1.644,0,1.366.807.978,2.26" fill="#fff"/><path d="M42.9,12.714c-.259.969-.434,1.7-1.85,1.7H40.5l2.11-7.874a1.866,1.866,0,0,1,1.008-1.5l.73-2.723H37.588l-.729,2.723c.569.36.353.934.2,1.507l-1.847,6.9a1.865,1.865,0,0,1-1.007,1.507l-.732,2.723H46.454l2-7.463H43.564Z" fill="#fff"/><path d="M29.168,2.01c-3.933,0-6.892.95-7.909,4.752l-1.733,6.475c-1.018,3.8,1.432,4.752,5.364,4.752s6.9-.95,7.908-4.752l1.734-6.474c1.017-3.8-1.432-4.753-5.364-4.753m-.124,4.5v0L27.18,13.471a1.452,1.452,0,0,1-1.4,1.2c-1.144,0-.793-1.094-.761-1.2l1.864-6.959a1.437,1.437,0,0,1,1.4-1.184c1.145,0,.793,1.076.764,1.184" fill="#fff"/><path d="M63.341,13.451l0,0,.381-11.138h-7.9l-5.268,10.9c-.326.593-.6,1.381-1.3,1.74l-.731,2.723h5.9l.731-2.723a.616.616,0,0,1-.544-.685h0a.562.562,0,0,1,.041-.156,2.125,2.125,0,0,1,.2-.448h3.155a1.437,1.437,0,0,1-.038.448,1.176,1.176,0,0,1-.872.843l-.73,2.723h6.773l.73-2.728c-.58-.16-.559-1.021-.534-1.505M58.312,10.67h-2.3l2.33-4.552h.042Z" fill="#fff"/><path d="M122.214,10.219l-.667,2.5c-.26.969-.434,1.706-1.85,1.706h-.543l2.107-7.872a1.865,1.865,0,0,1,1.008-1.507L123,2.318H116.24l-.73,2.723c.569.36.353.934.2,1.507l-1.849,6.9a1.861,1.861,0,0,1-1.006,1.507l-.967,2.723h13.217l2-7.463Z" fill="#fff"/><path d="M137.109,10.226l-.665,2.49c-.258.968-.435,1.7-1.849,1.7h-.544l2.108-7.872a1.868,1.868,0,0,1,1.006-1.5l.732-2.729h-6.763l-.727,2.723c.569.36.352.934.2,1.507l-1.85,6.9a1.861,1.861,0,0,1-1.006,1.507l-.73,2.723H140l2-7.458Z" fill="#fff"/><path d="M106.65,12.628c-.357,1.256-.481,1.793-2.144,1.793H103.7l.832-3.1h3.516l.8-2.995h-3.515l.735-2.744h.806c1.5,0,1.549.431,1.268,1.47l-.122.468h4.643l1.393-5.2H100.7L99.97,5.041c.569.36.354.934.2,1.507l-1.846,6.9a1.867,1.867,0,0,1-1.008,1.506l-.729,2.723H109.94l1.489-5.554h-4.644Z" fill="#fff"/><path d="M82.572,6.366c.375-1.4.225-2.708-1.03-3.443h0c-1.039-.627-2.77-.61-4.143-.61H69.68l-.732,2.724c.57.359.354.933.2,1.507l-1.85,6.9a1.868,1.868,0,0,1-1.006,1.507l-.731,2.723h6.761l.731-2.723c-.57-.359-.355-.934-.2-1.507l.389-1.325h.466c1.507.036,1.575.222,1.247,1.439a12.9,12.9,0,0,0-.793,4.123H79.9l.73-2.728c-.624-.233-.423-.986-.283-1.506l.238-.878c.418-1.56.008-2.207-1.643-2.568l.009-.035a4.522,4.522,0,0,0,3.625-3.6m-5.849.647h0a1.834,1.834,0,0,1-2.014,1.613h-.561l.841-3.138h.561c1.207,0,1.438.537,1.173,1.524" fill="#fff"/><path d="M90.344,12.975c-.168.628-.31,1.7-1.476,1.7s-.732-1.076-.563-1.7l1.59-5.936c.168-.628.312-1.706,1.475-1.706s.731,1.076.563,1.706l-.242.918h5.366L98.2,3.688a11.151,11.151,0,0,0-5.707-1.667,10.6,10.6,0,0,0-5.6,1.167,5.521,5.521,0,0,0-2.5,3.657l-1.432,5.344c-.452,1.686-.946,3.3.262,4.537.862.9,2.91,1.327,5.152,1.273a13.848,13.848,0,0,0,6.428-1.634l1.373-5.13H90.809Z" fill="#fff"/></g></svg>
      </NuxtLink>

      <div
        class="flex justify-end gap-[20px] xl:gap-[30px] items-center"
        :class="{'min-w-[144px]' : $attrs.isSlimHeader }">
        <NuxtLink :href="'tel:' + t('Footer.Hotline')" class="text-white font-extrabold text-[14px] flex gap-[10px]" v-if="!$attrs.isSlimHeader">
          <svg class="shrink-0" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><g transform="translate(-523 -39)"><g transform="translate(-664 -336)"><g transform="translate(1187 375)"><path d="M15.085,20a13.658,13.658,0,0,1-3.062-.455A17.117,17.117,0,0,1,4.96,15.007,17.029,17.029,0,0,1,.474,8.05C.017,6.127-.337,4.19.533,2.592A5.133,5.133,0,0,1,3.568.123,3.909,3.909,0,0,1,5.9.262,1.642,1.642,0,0,1,6.972,1.388L8.159,5.742a1.632,1.632,0,0,1-.345,1.5L6.119,9.3v0a14.074,14.074,0,0,0,2.072,2.5,11.538,11.538,0,0,0,2.539,2.071L12.8,12.145a1.6,1.6,0,0,1,1.454-.306l4.354,1.188A1.644,1.644,0,0,1,19.738,14.1a3.907,3.907,0,0,1,.138,2.334,5.13,5.13,0,0,1-2.47,3.035A4.763,4.763,0,0,1,15.085,20" fill="#00a4cc"/></g></g></g></svg>
          <span v-if="viewport.isGreaterOrEquals('lg')">
            {{ t('Footer.Hotline') }}
          </span>
        </NuxtLink>
        <SfDropdown v-if="isAuthorized" v-model="isAccountDropdownOpen" placement="bottom-end" class="z-50">
          <template #trigger>
            <UiButton
              variant="tertiary"
              class="!flex !text-black p-0 !text-[14px] !p-0 hover:bg-white active:bg-white gap-[10px]"
              data-testid="account-dropdown-button"
              @click="accountDropdownToggle()"
            >
              <template #prefix>
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="20" viewBox="0 0 18 20"><path d="M9,10a4.961,4.961,0,0,0,4.909-5A4.961,4.961,0,0,0,9,0,4.961,4.961,0,0,0,4.091,5,4.961,4.961,0,0,0,9,10" fill="#00a4cc"/><path d="M9,11.667c-4.626,0-9,2.43-9,5C0,18.91,2.944,20,9,20s9-1.09,9-3.333c0-2.57-4.374-5-9-5" fill="#00a4cc"/></svg>
              </template>
            </UiButton>
          </template>
          <ul class="rounded bg-white shadow-md border border-neutral-100 text-neutral-900 min-w-[152px] py-2">
            <li v-for="({ label, link }, labelIndex) in accountDropdown" :key="`label-${labelIndex}`">
              <template v-if="label === t('account.logout')">
                <UiDivider class="my-2" />
                <SfListItem tag="button" class="text-left" data-testid="account-dropdown-logout-item" @click="logOut()">
                  {{ label }}
                </SfListItem>
              </template>
              <SfListItem
                v-else
                :tag="NuxtLink"
                :to="link"
                :class="{ 'bg-neutral-200': route.path === link }"
                data-testid="account-dropdown-list-item"
              >
                {{ label }}
              </SfListItem>
            </li>
          </ul>
        </SfDropdown>      
        <NuxtLink
          v-else
          :href="viewport.isGreaterOrEquals('lg') ? '' : '/login'"
          class="flex items-center gap-[10px] cursor-pointer"
          :aria-label="t('authentication.login.openLoginForm')"
          @click="viewport.isGreaterOrEquals('lg') && navigateToLogin()"
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="20" viewBox="0 0 18 20"><path d="M9,10a4.961,4.961,0,0,0,4.909-5A4.961,4.961,0,0,0,9,0,4.961,4.961,0,0,0,4.091,5,4.961,4.961,0,0,0,9,10" fill="#00a4cc"/><path d="M9,11.667c-4.626,0-9,2.43-9,5C0,18.91,2.944,20,9,20s9-1.09,9-3.333c0-2.57-4.374-5-9-5" fill="#00a4cc"/></svg>
        </NuxtLink>

        <NuxtLink
          class="wl b flex items-center gap-[5px] lg:gap-[10px]"
          :class="{ 'active': cartItemsCount > 0 }"
          :to="localePath(paths.cart)"
          :aria-label="t('cart.numberInCart', { count: cartItemsCount })"
          data-testid="wishlist-page-navigation"
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><g transform="translate(0 0)"><path d="M19.487,2.639a2.4,2.4,0,0,0-1.9-.93H4.249A3.222,3.222,0,0,0,.6.1a.806.806,0,0,0,.4,1.561A1.612,1.612,0,0,1,2.969,2.821l1.8,7.121a4.018,4.018,0,0,0,3.9,3.053h6.043a4.018,4.018,0,0,0,3.9-3.053l1.305-5.228a2.4,2.4,0,0,0-.439-2.075" fill="#00a4cc"/><path d="M9.653,17.4a2.6,2.6,0,1,1-2.6-2.6,2.6,2.6,0,0,1,2.6,2.6" fill="#00a4cc"/><path d="M18.321,17.4a2.6,2.6,0,1,1-2.6-2.6,2.6,2.6,0,0,1,2.6,2.6" fill="#00a4cc"/></g></svg>
          <span v-if="cartItemsCount > 0" class="badge font-bold text-white text-[14px]" data-testid="cart-badge">{{ cartItemsCount }}</span>
        </NuxtLink>
      </div>
      
      <!-- Main Navigation -->
      <ul v-if="viewport.isGreaterOrEquals('lg')"
        class="flex lg:col-span-3 uppercase text-[16px] text-white gap-[35px] motion-safe:scroll-smooth overflow-x-auto scrollbar-hidden justify-center mx-auto xl:overflow-visible"
        :class="{'order-[-1] col-span-1 lg:gap-[15px]': $attrs.isSlimHeader}">
        <li v-for="(menuNode, index) in categoryTree" :key="index" class="relative group">
          <NuxtLink :to="localePath(generateCategoryLink(menuNode))">
            <span
              class="pb-[15px] lg:pt-[25px] block whitespace-nowrap relative after:content-[''] after:absolute after:bottom-0 after:left-0 after:right-0 after:h-[1px] after:bg-white after:scale-x-0 hover:after:scale-x-100 after:transition-transform after:duration-300"
              :class="{
                'pl-[20px] lg:pl-0 after:left-[20px] lg:after:left-[0]': index === 0, 
                'pr-[20px] lg:pr-0 after:right-[20px] lg:after:right-[0]': index === categoryTree.length - 1, 
                'font-[500] after:scale-x-100': isCategoryActive(menuNode),
                'lg:!py-[15px]': $attrs.isSlimHeader
              }"
              data-testid="category-button"
            >
              {{ categoryTreeGetters.getName(menuNode).replace(' - ', '-') }}
            </span>
          </NuxtLink>

          <!-- Dropdown: xl+ only, pure CSS hover, no JS -->
          <ul
            v-if="menuNode.children && menuNode.children.length > 0"
            class="hidden xl:group-hover:block absolute top-full left-0 right-0 bg-black text-white z-50 shadow-lg
                  [&_a]:block [&_a]:px-5 [&_a]:py-2 [&_a]:text-[14px] [&_a]:normal-case [&_a]:tracking-normal [&_a]:whitespace-nowrap [&_a]:transition-colors [&_a]:duration-150
                  [&_a:hover]:bg-white [&_a:hover]:text-black"
          >
            <li v-for="child in menuNode.children" :key="child.id">
              <NuxtLink :to="localePath(generateCategoryLink(child))">
                {{ categoryTreeGetters.getName(child) }}
              </NuxtLink>
            </li>
          </ul>
        </li>
      </ul>
      <div v-if="!$attrs.isSlimHeader" class="flex gap-[20px] items-center pt-[20px] lg:pt-0 col-span-2 lg:order-[-1] lg:col-span-1">
        <button
          v-if="viewport.isLessThan('lg')"
          :aria-label="t('common.navigation.closeMenu')"
          @click="openMenu([])"
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="27" height="20" viewBox="0 0 27 20"><g transform="translate(-0.5 -2.5)"><path d="M25,1H0A1,1,0,0,1-1,0,1,1,0,0,1,0-1H25a1,1,0,0,1,1,1A1,1,0,0,1,25,1Z" transform="translate(1.5 3.5)" fill="#fff"/><path d="M20,1H0A1,1,0,0,1-1,0,1,1,0,0,1,0-1H20a1,1,0,0,1,1,1A1,1,0,0,1,20,1Z" transform="translate(1.5 12.5)" fill="#fff"/><path d="M25,1H0A1,1,0,0,1-1,0,1,1,0,0,1,0-1H25a1,1,0,0,1,1,1A1,1,0,0,1,25,1Z" transform="translate(1.5 21.5)" fill="#fff"/></g></svg>
        </button>
        <UiSearch class="pt-[20px] grow" />
      </div>
    </nav>

    <div v-if="viewport.isGreaterThan('xl')" class="hidden">
      <nav ref="floatingRef">
        <ul
          class="flex flex-wrap px-6 py-2 bg-white border-b border-b-neutral-200 border-b-solid"
          @blur="
            (event: FocusEvent) => {
              if (!(event.currentTarget as Element).contains(event.relatedTarget as Element)) {
                close();
              }
            }
          "
        >
          <li v-if="categoryTree.length === 0" class="h-10" />

          <li v-for="(menuNode, index) in categoryTree" v-else :key="index">
            <NuxtLink :to="localePath(generateCategoryLink(menuNode))">
              <div
                ref="triggerReference"
                data-testid="category-button"
                class="inline-flex items-center justify-center gap-2 font-medium text-base rounded-md py-2 px-4 group mr-2 !text-neutral-900 hover:!bg-neutral-200 hover:!text-neutral-700 active:!bg-neutral-300 active:!text-neutral-900"
                @mouseenter="menuNode.childCount > 0 ? openMenu([menuNode.id]) : openMenu([])"
                @click="menuNode.childCount > 0 ? openMenu([menuNode.id]) : openMenu([])"
              >
                <span>{{ categoryTreeGetters.getName(menuNode) }}</span>
                <SfIconChevronRight
                  v-if="menuNode.childCount > 0"
                  class="rotate-90 text-neutral-500 group-hover:text-neutral-700 group-active:text-neutral-900"
                />
              </div>
            </NuxtLink>

            <div
              v-if="
                isOpen &&
                activeMenu &&
                activeNode.length === 1 &&
                activeNode[0] === menuNode.id &&
                menuNode.childCount > 0
              "
              :key="activeMenu.id"
              ref="megaMenuReference"
              :style="style"
              class="hidden md:grid gap-x-6 grid-cols-4 bg-white shadow-lg p-6 left-0 right-0 outline-none z-40"
              tabindex="0"
              @mouseleave="close()"
              @keydown.esc="focusTrigger(index)"
            >
              <template v-for="node in activeMenu.children" :key="node.id">
                <template v-if="node.childCount === 0">
                  <ul>
                    <SfListItem
                      :tag="NuxtLink"
                      size="sm"
                      :href="localePath(generateCategoryLink(node))"
                      class="typography-text-sm mb-2"
                    >
                      {{ categoryTreeGetters.getName(node) }}
                    </SfListItem>
                  </ul>
                </template>
                <div v-else>
                  <SfListItem
                    :tag="NuxtLink"
                    size="sm"
                    :href="localePath(generateCategoryLink(node))"
                    class="typography-text-base font-medium text-neutral-900 whitespace-nowrap px-4 py-1.5 border-b border-b-neutral-200 border-b-solid"
                  >
                    {{ categoryTreeGetters.getName(node) }}
                  </SfListItem>
                  <ul class="mt-2">
                    <li v-for="child in node.children" :key="child.id">
                      <SfListItem
                        v-if="categoryTreeGetters.getName(child)"
                        :tag="NuxtLink"
                        size="sm"
                        :href="localePath(generateCategoryLink(child))"
                        class="typography-text-sm py-1.5"
                      >
                        {{ categoryTreeGetters.getName(child) }}
                      </SfListItem>
                    </li>
                  </ul>
                </div>
              </template>
            </div>
          </li>
        </ul>
      </nav>
    </div>
    
    <template v-else>
      <div v-if="isOpen" class="fixed z-[50] inset-0 bg-black bg-opacity-50" />
      <SfDrawer
        ref="drawerReference"
        v-model="isOpen"
        placement="right"
        class="min-w-[95%] sm:min-w-96 bg-white overflow-y-auto z-[1000]"
      >
        <nav>
          <div class="flex items-center justify-between p-4 border-b border-b-neutral-200 border-b-solid">
            <p class="typography-text-base font-medium">{{ t('common.actions.browseProducts') }}</p>
            <UiButton variant="tertiary" square :aria-label="t('common.navigation.closeMenu')" class="ml-2" @click="close()">
              <SfIconClose class="text-primary-500" />
            </UiButton>
          </div>
          <ul v-if="activeMenu">
            <li v-if="activeMenu.id !== 0">
              <SfListItem
                size="lg"
                tag="button"
                type="button"
                class="border-b border-b-neutral-200 border-b-solid hover:bg-primary-500 hover:bg-opacity-15 active:bg-primary-500 active:bg-opacity-15"
                @click="goBack()"
              >
                <div class="flex items-center">
                  <SfIconChevronLeft class="text-primary-500" />
                  <p class="ml-5 font-medium">{{ categoryTreeGetters.getName(activeMenu) }}</p>
                </div>
              </SfListItem>
            </li>
            <template v-for="node in activeMenu.children" :key="node.id">
              <li v-if="node.childCount === 0">
                <SfListItem size="lg" :tag="NuxtLink" :href="localePath(generateCategoryLink(node))" @click="close()" class="hover:bg-primary-500 hover:bg-opacity-15 active:bg-primary-500 active:bg-opacity-15">
                  <div class="flex items-center">
                    <p class="text-left">{{ categoryTreeGetters.getName(node) }}</p>
                    <SfCounter v-if="categoryTreeGetters.getCount(node) > 0" class="ml-2 text-xs text-primary-500">{{ categoryTreeGetters.getCount(node) }}</SfCounter>
                  </div>
                </SfListItem>
              </li>
              <li v-else>
                <SfListItem
                  size="lg"
                  tag="button"
                  type="button"
                  class="!p-0 hover:bg-primary-500 hover:bg-opacity-15 active:bg-primary-500 active:bg-opacity-15"
                >
                  <div class="flex items-center w-100">
                    <NuxtLink class="flex-1 m-0 p-4 pr-0" :to="localePath(generateCategoryLink(node))" @click="close()">
                      <div class="flex items-center">
                        <p class="text-left">{{ categoryTreeGetters.getName(node) }}</p>
                        <SfCounter v-if="categoryTreeGetters.getCount(node) > 0" class="ml-2 text-xs text-primary-500">{{ categoryTreeGetters.getCount(node) }}</SfCounter>
                      </div>
                    </NuxtLink>
                    <div class="flex justify-center items-center h-8 w-16" @click="goNext(node.id)">
                      <SfIconChevronRight class="text-primary-500" />
                    </div>
                  </div>
                </SfListItem>
              </li>
            </template>
          </ul>
        </nav>
      </SfDrawer>
    </template>
  </header>

  <UiModal
    v-if="isAuthenticationOpen"
    v-model="isAuthenticationOpen"
    tag="section"
    class="h-full md:w-[500px] md:h-fit m-0 p-0 overflow-y-auto"
  >
    <header>
      <UiButton
        :aria-label="t('closeDialog')"
        square
        variant="tertiary"
        class="absolute right-2 top-2"
        @click="closeAuthentication"
      >
        <SfIconClose />
      </UiButton>
    </header>
    <LoginComponent v-if="isLogin" :is-modal="true" @change-view="isLogin = false" @logged-in="closeAuthentication" />
    <Register v-else :is-modal="true" @change-view="isLogin = true" @registered="closeAuthentication" />
  </UiModal>

  <NuxtLazyHydrate when-idle>
    <SfModal
      v-model="isSearchModalOpen"
      class="w-full h-full z-50"
      tag="section"
      role="dialog"
      aria-labelledby="search-modal-title"
    >
      <header class="mb-4">
        <UiButton
          :aria-label="t('closeDialog')"
          square
          variant="tertiary"
          class="absolute right-4 top-2"
          @click="searchModalClose"
        >
          <SfIconClose class="text-neutral-500" />
        </UiButton>
        <h3 id="search-modal-title" class="absolute left-6 top-4 font-bold typography-headline-4 mb-4">
          {{ t('search') }}
        </h3>
      </header>
      <UiSearch :close="searchModalClose" />
    </SfModal>
  </NuxtLazyHydrate>
</template>

<style scoped>

</style>

<script lang="ts" setup>
import { type CategoryTreeItem, categoryTreeGetters } from '@plentymarkets/shop-api';
import {
  SfDropdown,
  SfIconClose,
  SfDrawer,
  SfListItem,
  SfIconChevronRight,
  SfCounter,
  SfIconChevronLeft,
  SfIconMenu,
  SfModal,
  useTrapFocus,
  useDropdown,
  useDisclosure,
  SfIconPerson,
} from '@storefront-ui/vue';
import { unrefElement } from '@vueuse/core';
import type { MegaMenuProps } from '~/components/MegaMenu/types';
import { paths } from '~/utils/paths';

const { data: productsCatalog } = useProducts();
const currentCategoryId = computed(() => productsCatalog.value.category?.id);
const parentCategoryId = computed(() => productsCatalog.value.category?.parentCategoryId);

const viewport = useViewport();
const customViewport = useCustomViewport();
const localePath = useLocalePath();
const { buildCategoryMenuLink } = useLocalization();
const { setDrawerOpen } = useDrawerState();
const NuxtLink = resolveComponent('NuxtLink');
const props = defineProps<MegaMenuProps>();
const { close, open, isOpen, activeNode, category, setCategory } = useMegaMenu();
const { referenceRef, floatingRef, style } = useDropdown({
  isOpen,
  onClose: close,
  placement: 'bottom-start',
  middleware: [],
});
const categoryTree = ref(categoryTreeGetters.getTree(props.categories));

const route = useRoute();
const { open: searchModalOpen, isOpen: isSearchModalOpen, close: searchModalClose } = useDisclosure();
const { wishlistItemIds } = useWishlist();
const { data: cart } = useCart();
const cartItemsCount = ref(0);
const isLogin = ref(true);
const { user, isAuthorized, logout } = useCustomer();
const { isOpen: isAccountDropdownOpen, toggle: accountDropdownToggle } = useDisclosure();
const { isOpen: isAuthenticationOpen, open: openAuthentication, close: closeAuthentication } = useDisclosure();

// Check if we're on a category page
const isCategoryActive = (menuNode: CategoryTreeItem): boolean => {
  const categoryLink = localePath(generateCategoryLink(menuNode));
  const normalizedCurrentPath = route.path.replace(/\/$/, '');
  const normalizedCategoryLink = categoryLink.replace(/\/$/, '');
  
  // Check if we're on this exact category OR on a child category (path starts with category path)
  return normalizedCurrentPath === normalizedCategoryLink || 
         normalizedCurrentPath.startsWith(normalizedCategoryLink + '/');
};

onNuxtReady(() => {
  cartItemsCount.value = cart.value?.items?.reduce((price, { quantity }) => price + quantity, 0) ?? 0;
});

watch(
  () => cart.value?.items,
  (cartItems) => {
    cartItemsCount.value = cartItems?.reduce((price, { quantity }) => price + quantity, 0) ?? 0;
  },
);

const findNode = (keys: number[], node: CategoryTreeItem): CategoryTreeItem => {
  if (keys.length > 1) {
    const [currentKey, ...restKeys] = keys;
    return findNode(restKeys, node.children?.find((child) => child.id === currentKey) || node);
  } else {
    return node.children?.find((child) => child.id === keys[0]) || node;
  }
};

const generateCategoryLink = (category: CategoryTreeItem) => {
  return buildCategoryMenuLink(category, categoryTree.value);
};

const drawerReference = ref();
const megaMenuReference = ref();
const triggerReference = ref();

const activeMenu = computed(() => (category.value ? findNode(activeNode.value, category.value) : null));

const trapFocusOptions = {
  activeState: isOpen,
  arrowKeysUpDown: true,
  initialFocus: 'container',
} as const;
useTrapFocus(
  computed(() => megaMenuReference.value?.[0]),
  trapFocusOptions,
);
useTrapFocus(drawerReference, trapFocusOptions);

const openMenu = (menuType: number[]) => {
  activeNode.value = menuType;
  open();
  setDrawerOpen(true);
};

const goBack = () => {
  activeNode.value = activeNode.value.slice(0, -1);
};

const goNext = (key: number) => {
  activeNode.value = [...activeNode.value, key];
};

const focusTrigger = (index: number) => {
  unrefElement(triggerReference.value[index]).focus();
};

setCategory(categoryTree.value);

watch(
  () => props.categories,
  async (categories: CategoryTreeItem[]) => {
    categoryTree.value = categoryTreeGetters.getTree(categories);
    setCategory(categoryTree.value);
  },
);

const logOut = async () => {
  accountDropdownToggle();
  await logout();
  navigateTo(localePath(paths.home));
};

const accountDropdown = computed(() => [
  {
    label: t('account.heading'),
    link: localePath(paths.account),
  },
  {
    label: t('account.ordersAndReturns.section.myOrders'),
    link: localePath(paths.accountMyOrders),
  },
  {
    label: t('account.ordersAndReturns.section.returns'),
    link: localePath(paths.accountReturns),
  },
  {
    label: t('account.logout'),
  },
]);
const navigateToLogin = () => {
  if (route.path !== localePath(paths.authLogin)) {
    openAuthentication();
  }
};

const headerClass = computed(() => ({
  'z-[11]': isOpen.value,
}));

const isShow = ref(false);

const toggleSearch = () => {
  isShow.value = !isShow.value;
};

const storename: string = useRuntimeConfig().public.storename;
</script>